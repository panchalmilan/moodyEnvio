"use strict";var path=require("path"),geoCode=require("./utils/geocode"),forecast=require("./utils/forecast"),express=require("express"),app=express(),publicDirPath=path.join(__dirname,"../public"),viewsPath=path.join(__dirname,"../templates/views"),partialsPath=path.join(__dirname,"../templates/partials");app.set("view engine","ejs"),app.set("views",viewsPath),app.use(express.static(publicDirPath)),app.get("",function(e,t){t.render("index",{title:"Weather ",name:"Milan Panchal"})}),app.get("/help",function(e,t){t.render("help",{title:"This is a help page",name:"Milan Panchal"})}),app.get("/about",function(e,t){t.render("about",{title:"About page for this site"})}),app.get("/weather",function(e,i){var n=e.query.address;if(!n)return i.send({error:"You must provide an address"});geoCode(n,function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.latitude,a=t.longitude;t.location;if(e)return i.send({error:e});forecast(r,a,function(e,t){var r=t.forecast,a=t.location;if(e)return i.send({error:e});i.send({forecast:r,location:a,address:n})})})}),app.get("/products",function(e,t){if(!e.query.search)return t.send({error:"You must provide a search term"});t.send({products:[]})}),app.get("/help/*",function(e,t){t.render("404",{errorMessage:"Help article not found",title:"Help page Not Found"})}),app.get("*",function(e,t){t.render("404",{errorMessage:"Page Not Found",title:"Page Not Found"})}),app.listen(3e3,function(){console.log("Server is up on port 3000.")});